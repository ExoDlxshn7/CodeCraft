@model IEnumerable<SubApp1.Models.Post>

@{
    ViewData["Title"] = "Profile Page";
}

<script src="https://kit.fontawesome.com/b090154bf0.js" crossorigin="anonymous"></script>

<body>
    <div id="profile-container-left">
        <img id="profile-picture" src="https://i.imgur.com/Z8k08or.png">
        <div id="navbar-left">
            <a id="navbar-item" asp-area="Identity" asp-page="/Account/Manage/Index">Edit Profile</a><br>
        </div>
    </div>
    
    <div id="profile-container-right">
        <!-- Post Creation Area -->
        <div id="container-post">
            <div id="post-area">
                <form asp-action="CreatePost" asp-controller="Post" method="post" enctype="multipart/form-data">
                    @Html.AntiForgeryToken()
                    <textarea id="post-textarea" name="PostContent" placeholder="Write something"></textarea>
                    <input type="file" id="post-image" name="PostImage" accept="image/*" />
                    <button id="post-button" type="submit">Post</button>
                </form>
            </div>
        </div>

        <!-- User's Posts Display Area -->
       @foreach (var post in Model)
        {
            <div id="container-post">
                <div id="post-header">
                    <div id="post-pp">
                        <img alt="Profile picture" id="pp-content" src="@post.Users.ProfilePic">
                    </div>
                    <div id="post-profile">
                        @post.Users.UserName
                    </div>
                    <div id="post-posted">
                        <span>@post.CreatedAt.ToString("MMM dd") <br>at @post.CreatedAt.ToString("HH:mm")</span>
                    </div>
                </div>
                
                <div id="post-contents">
                    <p>@post.Content</p>
                    
                    @if (!string.IsNullOrEmpty(post.ImageUrl))
                    {
                        <img id="photo" src="@post.ImageUrl" />
                    }
                    

                    <div id="post-interaction">
                        <span id="post-choice"><a href="#"><i class="fa-regular fa-heart"></i> Like</a></span>
                        <span id="post-choice"><a href="#"><i class="fa-regular fa-comment"></i> Comment</a></span>
                        <span id="post-choice"><a href="#"><i class="fa-regular fa-star"></i> Favorite</a></span>
                        <span id="post-choice"><a href="#"><i class="fa-regular fa-share-from-square"></i> Share</a></span>
                    </div>
        <!-- Edit Button -->
        <form asp-action="EditPost" asp-controller="Post" method="get" style="display:inline;">
            <input type="hidden" name="id" value="@post.Id" />
            <button type="submit" id="post-edit-button">Edit</button>
        </form>

        <!-- Delete Button -->
        <form asp-action="DeletePost" asp-controller="Post" method="post" style="display:inline;">
            @Html.AntiForgeryToken()
            <input type="hidden" name="id" value="@post.Id" />
            <button type="submit" id="post-delete-button" onclick="return confirm('Are you sure you want to delete this post?');">Delete</button>
        </form>    
                </div>
            </div>
        }
    </div>
</body>
